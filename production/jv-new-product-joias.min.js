/* Orion JS | DESKTOP-EB0OVV3 - 10/06/2022 10:13:25 GMT */
"use strict";function orionFormatPrice(e,t,i,o){e=(e+"").replace(/[^0-9+\-Ee.]/g,""),e=isFinite(+e)?+e:0,o=void 0===o?",":o,i=void 0===i?".":i;var n="",n=function(e,t){var i=Math.pow(10,t);return""+(Math.round(e*i)/i).toFixed(t)};return 3<(n=((t=isFinite(+t)?Math.abs(t):0)?n(e,t):""+Math.round(e)).split("."))[0].length&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(n[1]||"").length<t&&(n[1]=n[1]||"",n[1]+=Array(t-n[1].length+1).join("0")),n.join(i)}!function(){console.log("Product - Deploy - 06-06-2022 - 10:44");try{var n={init:function(){n.setAvailableBodyClass(),n.enableShipping(),n.getInfoProduct(),n.applySlideToggleInInfomartions(),n.quantityProductToCart(),n.addProductCart(),n.applyConfigSelectSku(),n.applyFilterAdegaConfig(),n.applySlickWhenSkuChange(),n.applyPlaceholderInputsUnavaible()},windowOnload:function(){},ajaxStop:function(){},dataProduct:null,setAvailableBodyClass:function(){function o(e){e?$(document.body).addClass("jv-product-available").removeClass("jv-product-unavailable"):$(document.body).addClass("jv-product-unavailable").removeClass("jv-product-available")}$(document).on("skuSelected.vtex",function(e,t,i){o(i.available)}),o(skuJson.available)},enableShipping:function(){"function"==typeof window.ShippingValue&&window.ShippingValue()},getInfoProduct:function(){var e=skuJson.productId;$.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:".concat(e),dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(e){n.dataProduct=e[0],n.buildBigThumbs(e[0]),n.buildDescriptionJoias(e[0]),n.applyChangesPrices(e[0].items[0].sellers[0].commertialOffer.Price)})},buildBigThumbs:function(e){if(e.items[0].images.length<=2)return $("#show").addClass("no-slick"),$("#jv-prodimage-load").remove(),void $("#jv-product-block-image").removeClass("hide-block-image");$("#show").addClass("jv-with-slick");var i="",e=(e.items[0].images.forEach(function(e){var e=e.imageTag.replace(/~/g,""),t=(e=(e=e.replace(/#width#-#height#/g,"450-450")).replace(/width="#width#" height="#height#"/g,""),$(e));t=(t=t.attr("src")).replace(/450-450/g,"1000-1000"),i+='<div class="jv-bigthumbs-block"><a class="jqzoom" href="'.concat(t,'">').concat(e,"</a></div>")}),'<div class="jv-bigthumbs">'.concat(i,"</div>"));$("#include").html(e),$(".jqzoom").jqzoom({zoomType:"standard",zoomWidth:500,zoomHeight:500,preloadImages:!0}),n.applySlickImageAndThumbs()},applySlickImageAndThumbs:function(){var e=$(".jv-bigthumbs"),t=$("#show .thumbs");e.each(function(){$(this).find(".slick-arrow").wrapAll('<div class="slick-nav" />')}),e.slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,infinity:!0,asNavFor:$("#show .thumbs")}),t.not(".slick-initialized").slick({slidesToShow:3,slidesToScroll:1,asNavFor:$(".jv-bigthumbs"),arrows:!0,dots:!1,centerMode:!0,focusOnSelect:!0,infinity:!0}),setTimeout(function(){$("#jv-prodimage-load").remove(),$("#jv-product-block-image").removeClass("hide-block-image")},1e3)},applySlickShelf:function(){var e=$(".jv-shelf.wrapper ul");e.find("li[layout]").length<=4||0==e.children().length?e.addClass("jv-shelf-no-slick"):e.slick({slidesToShow:4,slidesToScroll:1,arrows:!0,fade:!0})},applyChangesPrices:function(e){var e='<em class="jv-price-boleto-pix">Ou <strong>'.concat(orionFormatPrice(100*(e*=.9)/100,2,",",".")," </strong> no boleto, PIX ou transferência</em>"),e=($(e).appendTo($(".descricao-preco")),$(".descricao-preco .price-installments").first()),t=(t=e.text()).replace("ou"," em até");e.text(t)},applySlideToggleInInfomartions:function(){$(".informations-section span").on("click",function(e){e.preventDefault();e=$(this);e.toggleClass("active"),e.next().toggle()})},buildDescriptionJoias:function(e){$("#jv-details-product").html("<p>".concat(e.description,"</p>")),e["Cuidados com a peça"]&&e["Cuidados com a peça"][0]?$("#jv-warnings-product").html("<p>".concat(e["Cuidados com a peça"][0],"</p>")):$(".informations-section.warnings").hide()},applyConfigSelectSku:function(){$(".block.shipping-info").hide(),0!=$(".sku-selector-container.sku-selector-container-0").children().length&&($('select[specification="Tamanho"]').length&&($('.block.skuselection select[specification="Tamanho"]').find("option").first().attr("disabled",!0),$('.block.skuselection select[specification="Tamanho"]').find("option").first().attr("hidden",!0),$('.block.skuselection select[specification="Tamanho"]').find("option").first().text("Tamanho")),$('select[specification="Cor"]').length&&($('.block.skuselection select[specification="Cor"]').find("option").first().attr("disabled",!0),$('.block.skuselection select[specification="Cor"]').find("option").first().attr("hidden",!0),$('.block.skuselection select[specification="Cor"]').find("option").first().text("Cor")),$('select[specification="Letra"]').length&&($('.block.skuselection select[specification="Letra"]').find("option").first().attr("disabled",!0),$('.block.skuselection select[specification="Letra"]').find("option").first().attr("hidden",!0),$('.block.skuselection select[specification="Letra"]').find("option").first().text("Letra")))},quantityProductToCart:function(){var t=$(".buybutton-qtt input"),i=$(".buybutton-wrapper .buy-button.buy-button-ref"),o=1;$(".buybutton-qtt-inputs span").on("click",function(e){e.preventDefault(),o=t.val(),o=parseInt(o);e=i.attr("href");$(this).is(".inputs-up")?(o=parseInt(o)+parseInt(1),t.val(o),e=e.replace(/qty=\d+/g,"qty=".concat(o)),i.attr("href",e)):$(this).is(".inputs-down")&&1!=o&&(o=parseInt(o)-parseInt(1),t.val(o),e=e.replace(/qty=\d+/g,"qty=".concat(o)),i.attr("href",e))})},addProductCart:function(){$(".buybutton-wrapper .buy-button.buy-button-ref").on("click",function(e){e.preventDefault();var i=$(this),o=n.returnSku($(this));if("alerta"==o)return alert("Por favor, selecione o modelo desejado."),!1;document.URL.match("JOIAS10")||document.URL.match("joias10")?(console.log("Com cupom."),vtexjs.checkout.getOrderForm().then(function(e){return vtexjs.checkout.addDiscountCoupon("JOIAS10")}).then(function(e){var t=$("#jv-joias-qtt-input").val();i.addClass("active-load"),n.sendProductToOrderForm(o,t,i)})):(e=$("#jv-joias-qtt-input").val(),i.addClass("active-load"),n.sendProductToOrderForm(o,e,i))})},sendProductToOrderForm:function(e,t,i){var o={id:e,quantity:t,seller:"1"};vtexjs.checkout.getOrderForm().done(function(e){vtexjs.checkout.addToCart([o],null).done(function(e){miniCartFunctions.update(e),$(".mini-cart-wrapper").addClass("active"),$(".mini-cart-close-overlay").fadeIn(400,"linear"),i.removeClass("active-load")})})},returnSku:function(e){if("javascript:alert('Por favor, selecione o modelo desejado.');"==e.attr("href"))return"alerta";if(1<skuJson.skus.length){var t;if("Pingentes Letras"!=vtxctx.categoryName)return t=$("select.sku-selector option:selected").val(),skuJson.skus.find(function(e){return e.values[0]==t}).sku;var i=$(".skuList.item-dimension-Letra option:selected").val();return skuJson.skus.find(function(e){return e.dimensions.Letra==i}).sku}return skuJson.skus[0].sku},applyFilterAdegaConfig:function(){$(window).width()<768&&($(".search-single-navigator").hide(),$(".search-single-navigator").before("<div class='menu-dep-filtrar'>VER MAIS VINHOS</div>"),$(".search-single-navigator h5").click(function(e){e.preventDefault(),$(this).toggleClass("active")}),$(".menu-dep-filtrar").click(function(e){$(".menu-dep-filtrar").toggleClass("active"),$(".search-single-navigator").slideToggle()}),$(".jv-product-adega-shipping ul").not(".slick-initialized").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,drag:!0}))},applySlickWhenSkuChange:function(){$(document).on("vtex.sku.changed",function(e,t,i){2<$("ul.thumbs li").length&&$("ul.thumbs").is(".slick-slider")&&n.updateImages(i.sku),n.applyConfigSelectSku();var o=skuJson.skus.find(function(e){return e.sku==i.sku}).spotPrice;n.applyPriceWhenSkuChange(o)})},applyPriceWhenSkuChange:function(e){var e='<em class="jv-price-boleto-pix">Ou <strong>'.concat(orionFormatPrice((e*=.9)/100,2,",",".")," </strong> no boleto, PIX ou transferência</em>"),e=($(e).appendTo($(".descricao-preco")),$(".descricao-preco .price-installments").first()),t=(t=e.text()).replace("ou"," em até");e.text(t)},applyPlaceholderInputsUnavaible:function(){$(document.body).is(".jv-product-available")&&($("#notifymeClientName").attr("placeholder","Digite seu nome"),$("#notifymeClientEmail").attr("placeholder","Digite seu e-mail"))},updateImages:function(t){$("#include").html('<div id="jv-prodimage-load-sku-change"><img class="img-sku-change-load img-fluid" src="https://jackvartaniangithub.github.io/production/jv-spinner-product-image.gif" /></div>'),$("ul.thumbs").slick("unslick"),setTimeout(function(){var i="",e=(n.dataProduct.items.find(function(e){return e.itemId==t}).images.forEach(function(e){console.log(e);var e=e.imageTag.replace(/~/g,""),t=(e=(e=e.replace(/#width#-#height#/g,"450-450")).replace(/width="#width#" height="#height#"/g,""),$(e));t=(t=t.attr("src")).replace(/450-450/g,"1000-1000"),i+='<div class="jv-bigthumbs-block"><a class="jqzoom" href="'.concat(t,'">').concat(e,"</a></div>")}),'<div class="jv-bigthumbs">'.concat(i,"</div>"));$("#include").html(e),$(".jv-bigthumbs").slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,infinity:!0,asNavFor:$("ul.thumbs")}),$("ul.thumbs").slick({slidesToShow:3,slidesToScroll:1,asNavFor:$(".jv-bigthumbs"),arrows:!0,dots:!1,centerMode:!0,focusOnSelect:!0,infinity:!0})},1e3)}};$(document).ready(n.init);$(window).load(function(){n.windowOnload()}),$(document).ajaxStop(n.ajaxStop)}catch(n){console.log("Erro na instância do [NewProduct]: ",n)}}();