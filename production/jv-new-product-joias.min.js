function orionFormatPrice(e,t,o,a){e=(e+"").replace(/[^0-9+\-Ee.]/g,""),e=isFinite(+e)?+e:0,a=void 0===a?",":a,o=void 0===o?".":o;var s="",s=function(e,t){var o=Math.pow(10,t);return""+(Math.round(e*o)/o).toFixed(t)};return 3<(s=((t=isFinite(+t)?Math.abs(t):0)?s(e,t):""+Math.round(e)).split("."))[0].length&&(s[0]=s[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(s[1]||"").length<t&&(s[1]=s[1]||"",s[1]+=Array(t-s[1].length+1).join("0")),s.join(o)}!function(){try{let s={init:()=>{s.setAvailableBodyClass(),s.enableShipping(),s.getInfoSkuStock(),s.setMenssageInfoStock(),s.getInfoProduct(),s.applyChangesPrices(),s.applySlideToggleInInfomartions(),s.quantityProductToCart(),s.addProductCart(),s.applyConfigSelectSku(),s.applyFilterAdegaConfig(),s.applySlickWhenSkuChange(),s.applyRequestStockPromotion(),s.applyPlaceholderInputsUnavaible()},windowOnload:()=>{},ajaxStop:()=>{},setAvailableBodyClass:()=>{function a(e){e?$(document.body).addClass("jv-product-available").removeClass("jv-product-unavailable"):$(document.body).addClass("jv-product-unavailable").removeClass("jv-product-available")}$(document).on("skuSelected.vtex",function(e,t,o){a(o.available)}),a(skuJson.available)},enableShipping:()=>{"function"==typeof window.ShippingValue&&window.ShippingValue()},getInfoSkuStock:()=>{if($(".sku-selector-container.sku-selector-container-0").length){let e=$(".buy-button.buy-button-ref")[0].href;function t(e){"string"==typeof e&&(e=JSON.parse(e)),console.log("TRIGGERED");var t=e.qtd,e=(e.isUnlimited,e.reservedQuantity);0<t&&t<=3&&e<t?(console.log("AAA"),$("#jv-promotion-info-stock").text("APENAS "+t+" EM ESTOQUE. NÃO DEIXE PRA DEPOIS!")):(console.log("BBB"),$("#jv-promotion-info-stock").text(""))}function o(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&t(o.responseText)},o.open("GET",e,!0),o.send(null)}e.includes("?sku=")&&o("https://jvtoolbox.herokuapp.com/api/getInventoryBySku/"+e.split("?sku=")[1].split("&")[0],t),null!=document.querySelector(".sku-selector")&&vtexjs.catalog.getCurrentProductWithVariations().done(function(e){var t=e.skus;if(1<t.length)for(i=0;i<t.length;i++)sku=t[i].sku,dimension=t[i].dimensions.Tamanho,el=document.querySelectorAll('.sku-selector[specification="Tamanho"] option[class^="skuopcao_"][value="'+dimension+'"]'),function(e,t){null!=t&&fetch(e).then(function(e){return e.json()}).then(function(e){e=e.qtd-e.reservedQuantity;0<e?t.innerText+=" ("+e+" em estoque)":(t.innerText+=" (encomende agora)",0<document.querySelectorAll(".product-main-images .salejun2021-all").length&&(t.style.display="none"))})}("https://jvtoolbox.herokuapp.com/api/getInventoryBySku/"+sku,el[0])}),$(document).on("skuSelected",function(){setTimeout(function(){o("http://jvtoolbox.herokuapp.com/api/getInventoryBySku/"+$(".buy-button.buy-button-ref")[0].href.split("?sku=")[1].split("&")[0],t)},1)})}else console.log("Sem SKU vinculado - [getInfoSkuStock] encerrado.")},setMenssageInfoStock:()=>{var e,t,o;function a(e){category="joias",vtexjs.checkout.simulateShipping([{id:e,quantity:1,seller:"1"}],"01241001","BRA").done(function(e){var t,o,a,s,n,i,r,l,c,p,d,u,m,g,h,f,v,b,y,k,S=e.logisticsInfo[0].slas;for(l in"Adega JV"==e.logisticsInfo[0].slas[0].deliveryIds[0].courierName&&(category="adega"),S)slaId=S[l].id,shippingEst=S[l].shippingEstimate,"Entrega Expressa"==slaId&&"1bd"==shippingEst&&(a=!0),"Entrega Própria"==slaId&&"1bd"==shippingEst&&(t=!0),"Entrega Própria"==slaId&&"7bd"==shippingEst&&(o=!0),"Entrega Própria"==slaId&&"15bd"==shippingEst&&(s=!0),"Entrega Própria"==slaId&&"20bd"==shippingEst&&(n=!0),"Entrega Própria"==slaId&&"25bd"==shippingEst&&(i=!0);if(r="Acessórios"==vtxctx.categoryName?"Produto sob encomenda":"Sold out, garanta o seu encomendando agora",a||t&&!a?(document.getElementsByClassName("msg-prazo-sp")[0].innerHTML="Receba em até <b>1 dia útil</b> para a Grande São Paulo.",document.getElementsByClassName("msg-prazo-br")[0].innerHTML="Receba em até <b>5 dias úteis</b> para as demais cidades."):o&&!a?(document.getElementsByClassName("msg-prazo-sp")[0].innerHTML="Receba em até <b>7 dias úteis</b> para todo o Brasil.<br>",document.getElementsByClassName("msg-prazo-br")[0].innerHTML=""):s?(document.getElementsByClassName("msg-prazo-sp")[0].innerHTML="<span class='outofstock' style='margin-bottom: 8px;font-weight:bold;text-transform:uppercase;display: block;'>"+r+"</span>Receba em até <b>15 dias úteis</b>.",document.getElementsByClassName("msg-prazo-br")[0].innerHTML=""):n?(document.getElementsByClassName("msg-prazo-sp")[0].innerHTML="<span 'outofstock' style='margin-bottom: 8px;font-weight:bold;text-transform:uppercase;display: block;'>"+r+"</span>Receba em até <b>20 dias úteis</b>.",document.getElementsByClassName("msg-prazo-br")[0].innerHTML=""):i&&(document.getElementsByClassName("msg-prazo-sp")[0].innerHTML="<span 'outofstock' style='margin-bottom: 8px;font-weight:bold;text-transform:uppercase;display: block;'>"+r+"</span>Receba em até <b>25 dias úteis</b>.",document.getElementsByClassName("msg-prazo-br")[0].innerHTML=""),$(".msg-prazo-sp").show(),$(".msg-prazo-br").show(),document.getElementsByClassName("msg-envio-mesmo-dia")[0].innerHTML="",a)try{$(".flag.entrega-expressa-24hs").hide(),c=category,m="adega"==c?15:17,(g=new Date).setUTCHours(m),g.setUTCMinutes(0),g.setUTCSeconds(0),g.setUTCMilliseconds(0),f=new Date,v=g-f,b=Math.floor(v%864e5/36e5),y=Math.floor(v%36e5/6e4),v=Math.floor(v%6e4/1e3),y<10&&(y="0"+y),0==b?h=y+" minutos":0<b&&(h=b+" h "+y+" min"),f=new Date,curHour=f.getHours(),curMin=f.getMinutes(),curDay=f.getDay(),days=["sun","mon","tue","wed","thu","fri","sat"],"sat"!=(curDay=days[curDay])&&"sun"!=curDay&&(curDay==days[f.getUTCDay()]&&f.getUTCHours()<m?p=!(d=u=!1):(curDay!=days[f.getUTCDay()]&&f.getUTCHours(),d=!(p=u=!1))),"sun"==curDay&&(d=!(p=u=!1)),("fri"==curDay&&f.getUTCHours()>=m||"sat"==curDay)&&(u=!(p=d=!1)),v="",p?(compreStr="Comprando dentro de <b>"+h+"</b>:",k="HOJE",v='<span style="font-weight: normal;color: grey;font-size: 12px;text-transform: none;">*Válido para pagamentos aprovados até as 14h.</span>',$(".msg-prazo, .flag.entrega-expressa-24hs").hide(),$(".product-main-info .productName").removeClass("hasFlag")):d?(compreStr="Comprando <b>AGORA</b>:",k="AMANHÃ",v='<span style="font-weight: normal;color: grey;font-size: 12px;text-transform: none;">*Válido para pagamentos aprovados até as 14h.</span>',$(".msg-prazo,.flag.entrega-expressa-24hs").hide(),$(".product-main-info .productName").removeClass("hasFlag")):u?(compreStr="Comprando <b>AGORA</b>:",k="NA SEGUNDA-FEIRA",$(".msg-prazo,.flag.entrega-expressa-24hs").hide(),$(".product-main-info .productName").removeClass("hasFlag")):deliversFriday&&(compreStr="Comprando <b>AGORA</b>:",k="NA SEXTA-FEIRA",$(".msg-prazo,.flag.entrega-expressa-24hs").hide(),$(".product-main-info .productName").removeClass("hasFlag")),y=b="",p&&(b='<span class="msg-prazo-compre">'+compreStr+"</span>"),y='<div style="margin-top: 7px;"><svg style="position:absolute;" height="20" width="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M5 11v1h8v-7h-10v-1c0-.552.448-1 1-1h10c.552 0 1 .448 1 1v2h4.667c1.117 0 1.6.576 1.936 1.107.594.94 1.536 2.432 2.109 3.378.188.312.288.67.288 1.035v4.48c0 1.089-.743 2-2 2h-1c0 1.656-1.344 3-3 3s-3-1.344-3-3h-4c0 1.656-1.344 3-3 3s-3-1.344-3-3h-1c-.552 0-1-.448-1-1v-6h-2v-2h7v2h-3zm3 5.8c.662 0 1.2.538 1.2 1.2 0 .662-.538 1.2-1.2 1.2-.662 0-1.2-.538-1.2-1.2 0-.662.538-1.2 1.2-1.2zm10 0c.662 0 1.2.538 1.2 1.2 0 .662-.538 1.2-1.2 1.2-.662 0-1.2-.538-1.2-1.2 0-.662.538-1.2 1.2-1.2zm-3-2.8h-10v2h.765c.549-.614 1.347-1 2.235-1 .888 0 1.686.386 2.235 1h5.53c.549-.614 1.347-1 2.235-1 .888 0 1.686.386 2.235 1h1.765v-4.575l-1.711-2.929c-.179-.307-.508-.496-.863-.496h-4.426v6zm1-5v3h5l-1.427-2.496c-.178-.312-.509-.504-.868-.504h-2.705zm-16-3h8v2h-8v-2z"/></svg><span style="padding-left:30px;font-size:15px" class="msg-prazo-enviamos"><strong>ENVIAMOS '+k+'</strong> <span style="font-size:14px" class="msg-prazo-enviamos-inner"> para as demais cidades, você recebe em até 5 dias úteis</span></span></div>',f='<div style="margin-top: 7px;"><svg style="position:absolute;" xmlns="http://www.w3.org/2000/svg" height="20" width="24" viewBox="0 0 24 24"><path d="M8 24l3-9h-9l14-15-3 9h9l-14 15z"/></svg><p style="padding-left:30px;font-size:15px" class="msg-prazo-receba"><strong>RECEBA '+k+'</strong> <span style="font-size:14px" class="msg-prazo-receba-inner"> na Grande São Paulo</span></p></div>',"adega"==c&&(y='<div style="margin-top: 7px;"><svg style="position:absolute;" height="20" width="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M5 11v1h8v-7h-10v-1c0-.552.448-1 1-1h10c.552 0 1 .448 1 1v2h4.667c1.117 0 1.6.576 1.936 1.107.594.94 1.536 2.432 2.109 3.378.188.312.288.67.288 1.035v4.48c0 1.089-.743 2-2 2h-1c0 1.656-1.344 3-3 3s-3-1.344-3-3h-4c0 1.656-1.344 3-3 3s-3-1.344-3-3h-1c-.552 0-1-.448-1-1v-6h-2v-2h7v2h-3zm3 5.8c.662 0 1.2.538 1.2 1.2 0 .662-.538 1.2-1.2 1.2-.662 0-1.2-.538-1.2-1.2 0-.662.538-1.2 1.2-1.2zm10 0c.662 0 1.2.538 1.2 1.2 0 .662-.538 1.2-1.2 1.2-.662 0-1.2-.538-1.2-1.2 0-.662.538-1.2 1.2-1.2zm-3-2.8h-10v2h.765c.549-.614 1.347-1 2.235-1 .888 0 1.686.386 2.235 1h5.53c.549-.614 1.347-1 2.235-1 .888 0 1.686.386 2.235 1h1.765v-4.575l-1.711-2.929c-.179-.307-.508-.496-.863-.496h-4.426v6zm1-5v3h5l-1.427-2.496c-.178-.312-.509-.504-.868-.504h-2.705zm-16-3h8v2h-8v-2z"/></svg><span style="padding-left:30px;font-size:15px" class="msg-prazo-enviamos">ENVIAMOS '+k+' <span style="font-size:14px" class="msg-prazo-enviamos-inner"> para as demais cidades</span></span></div>',v=""),(0<y.length||0<f.length)&&($(".msg-envio-mesmo-dia")[0].innerHTML=b+f+y+v,p&&(todaytimer=setInterval(function(){var e,t=(new Date).getTime(),t=g-t,o=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),s=Math.floor(t%36e5/6e4),n=Math.floor(t%6e4/1e3);s<10&&(s="0"+s),n<10&&(n="0"+n),0==a?e=s+" min "+n+" s":0<a&&(e=a+" h "+s+" min "+n+" s"),compreStr="Comprando dentro de <b>"+e+"</b>:",$(".msg-prazo-compre").html(compreStr),t<0&&(clearInterval(todaytimer),compreStr="Comprando dentro de <b>PRAZO EXPIRADO</b>:",$(".msg-prazo-compre").html(compreStr))},1e3)))}catch(e){console.log("error receive today: "+e)}})}$(document).on("skuSelected",function(){setTimeout(function(){e=document.getElementsByClassName("buy-button buy-button-ref"),e=e[0],e=e.getAttribute("href"),(e=function(e){var t,o;for(i=0;i<e.length;i++)if(o="="==e[i]&&"u"==e[i-1]&&"k"==e[i-2]?!0:o){if("&"==e[i+1]){o=!1;break}t+=e[i+1]}return t}(e)).includes("undefined")&&(e=e.split("undefined")[1]),a(parseInt(e))},1)}),vtexjs.catalog.getCurrentProductWithVariations().done(function(e){t=e}),1==(o=t.skus).length&&a(sku=o[0].sku)},getInfoProduct:()=>{var e=skuJson.productId;$.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+e,dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(e){s.buildBigThumbs(e[0]),s.buildDescriptionJoias(e[0])})},buildBigThumbs:e=>{if(e.items[0].images.length<=2)return $("#show").addClass("no-slick"),$("#jv-prodimage-load").remove(),void $("#jv-product-block-image").removeClass("hide-block-image");$("#show").addClass("jv-with-slick");let a="";e.items[0].images.forEach(e=>{let t=e.imageTag.replace(/~/g,""),o=(t=(t=t.replace(/#width#-#height#/g,"450-450")).replace(/width="#width#" height="#height#"/g,""),$(t));o=(o=o.attr("src")).replace(/450-450/g,"1000-1000"),a+=`<div class="jv-bigthumbs-block"><a class="jqzoom" href="${o}">${t}</a></div>`});e=`<div class="jv-bigthumbs">${a}</div>`;$("#include").html(e),$(".jqzoom").jqzoom({zoomType:"standard",zoomWidth:500,zoomHeight:500,preloadImages:!0}),s.applySlickImageAndThumbs()},applySlickImageAndThumbs:()=>{let e=$(".jv-bigthumbs"),t=$("#show .thumbs");e.each(function(){$(this).find(".slick-arrow").wrapAll('<div class="slick-nav" />')}),e.slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,infinity:!0,asNavFor:$("#show .thumbs")}),t.not(".slick-initialized").slick({slidesToShow:3,slidesToScroll:1,asNavFor:$(".jv-bigthumbs"),arrows:!0,dots:!1,centerMode:!0,focusOnSelect:!0,infinity:!0}),setTimeout(function(){$("#jv-prodimage-load").remove(),$("#jv-product-block-image").removeClass("hide-block-image")},1e3)},applySlickShelf:()=>{let e=$(".jv-shelf.wrapper ul");e.find("li[layout]").length<=4||0==e.children().length?e.addClass("jv-shelf-no-slick"):e.slick({slidesToShow:4,slidesToScroll:1,arrows:!0,fade:!0})},applyChangesPrices:()=>{var e=`<em class="jv-price-boleto-pix">Ou <strong>${(fixPrice=function(e){return 4==(p=e.toFixed(2).replace(".",",")).split(",")[0].length?"R$ "+p[0]+"."+p.substring(1,p.length):5==p.split(",")[0].length?"R$ "+p.substring(0,2)+"."+p.substring(2,p.length):"R$ "+p})(.9*parseInt(dataLayer[0].productPriceTo))} </strong> no boleto, PIX ou transferência</em>`;$(e).appendTo($(".descricao-preco"));let t=$(".descricao-preco .price-installments").first(),o=t.text();o=o.replace("ou"," em até"),t.text(o)},applySlideToggleInInfomartions:()=>{$(".informations-section span").on("click",function(e){e.preventDefault();let t=$(this);t.toggleClass("active"),t.next().toggle()})},buildDescriptionJoias:e=>{$("#jv-details-product").html(`<p>${e.description}</p>`),e["Cuidados com a peça"]&&e["Cuidados com a peça"][0]&&$("#jv-warnings-product").html(`<p>${e["Cuidados com a peça"][0]}</p>`)},applyConfigSelectSku:()=>{$(".block.shipping-info").hide(),0!=$(".sku-selector-container.sku-selector-container-0").children().length&&($('select[specification="Tamanho"]').length&&($('.block.skuselection select[specification="Tamanho"]').find("option").first().attr("disabled",!0),$('.block.skuselection select[specification="Tamanho"]').find("option").first().attr("hidden",!0),$('.block.skuselection select[specification="Tamanho"]').find("option").first().text("Tamanho")),$('select[specification="Cor"]').length&&($('.block.skuselection select[specification="Cor"]').find("option").first().attr("disabled",!0),$('.block.skuselection select[specification="Cor"]').find("option").first().attr("hidden",!0),$('.block.skuselection select[specification="Cor"]').find("option").first().text("Cor")),$('select[specification="Letra"]').length&&($('.block.skuselection select[specification="Letra"]').find("option").first().attr("disabled",!0),$('.block.skuselection select[specification="Letra"]').find("option").first().attr("hidden",!0),$('.block.skuselection select[specification="Letra"]').find("option").first().text("Letra")))},quantityProductToCart:()=>{let o=$(".buybutton-qtt input"),a=$(".buybutton-wrapper .buy-button.buy-button-ref"),s=1;$(".buybutton-qtt-inputs span").on("click",function(e){e.preventDefault(),s=o.val(),s=parseInt(s);let t=a.attr("href");$(this).is(".inputs-up")?(s=parseInt(s)+parseInt(1),o.val(s),t=t.replace(/qty=\d+/g,"qty="+s),a.attr("href",t)):$(this).is(".inputs-down")&&1!=s&&(s=parseInt(s)-parseInt(1),o.val(s),t=t.replace(/qty=\d+/g,"qty="+s),a.attr("href",t))})},addProductCart:()=>{$(".buybutton-wrapper .buy-button.buy-button-ref").on("click",function(e){e.preventDefault();let t=$(this),o=s.returnSku($(this));if("alerta"==o)return alert("Por favor, selecione o modelo desejado."),!1;e=$("#jv-joias-qtt-input").val();t.addClass("active-load"),s.sendProductToOrderForm(o,e,t)})},sendProductToOrderForm:(e,t,o)=>{let a={id:e,quantity:t,seller:"1"};vtexjs.checkout.getOrderForm().done(function(e){vtexjs.checkout.addToCart([a],null).done(function(e){miniCartFunctions.update(e),$(".mini-cart-wrapper").addClass("active"),$(".mini-cart-close-overlay").fadeIn(400,"linear"),o.removeClass("active-load")})})},returnSku:e=>{let t=e.attr("href");return"javascript:alert('Por favor, selecione o modelo desejado.');"==t?"alerta":skuId=t.match(/(?<=sku=).*(?=&qty)/g)[0]},applyFilterAdegaConfig:()=>{$(window).width()<768&&($(".search-single-navigator").hide(),$(".search-single-navigator").before("<div class='menu-dep-filtrar'>VER MAIS VINHOS</div>"),$(".search-single-navigator h5").click(function(e){e.preventDefault(),$(this).toggleClass("active")}),$(".menu-dep-filtrar").click(function(e){$(".menu-dep-filtrar").toggleClass("active"),$(".search-single-navigator").slideToggle()}),$(".jv-product-adega-shipping ul").not(".slick-initialized").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,drag:!0}))},applySlickWhenSkuChange:()=>{$(document).on("skuSelected.vtex",function(e,t,o){2<$("ul.thumbs li").length&&($("ul.thumbs").removeClass("slick-initialized slick-slider"),$("ul.thumbs").slick("refresh")),s.applyConfigSelectSku()}),$(document).on("vtex.sku.changed",function(e,t,o){s.applyPriceWhenSkuChange()})},applyPriceWhenSkuChange:()=>{var e=`<em class="jv-price-boleto-pix">Ou <strong>${(fixPrice=function(e){return 4==(p=e.toFixed(2).replace(".",",")).split(",")[0].length?"R$ "+p[0]+"."+p.substring(1,p.length):5==p.split(",")[0].length?"R$ "+p.substring(0,2)+"."+p.substring(2,p.length):"R$ "+p})(.9*parseInt(dataLayer[0].productPriceTo))} </strong> no boleto, PIX ou transferência</em>`;$(e).appendTo($(".descricao-preco"));let t=$(".descricao-preco .price-installments").first(),o=t.text();o=o.replace("ou"," em até"),t.text(o)},applyRequestStockPromotion:()=>{if(0==$(".sku-selector-container.sku-selector-container-0").children().length)$(".block.shipping-info").hide();else{let o=/\d/g,a=/\(([^)]+)\)/g,e=$(".select.skuList option:selected").text();var t;e.match("encomende")||"Tamanho"==e?(console.log("AA"),$(".block.shipping-info").hide()):(console.log("BB"),t=e.match(o)[0],$("#jv-promotion-info-stock").text(`APENAS ${t} EM ESTOQUE. NÃO DEIXE PRA DEPOIS!`)),$('select[specification="Tamanho"]').on("change",function(){let e=$("option:selected",this).text();var t;e.match("encomende")||"Tamanho"==e?($(".block.shipping-info").hide(),console.log("A")):(console.log(e),t=e.match(a)[0].match(o)[0],$("#jv-promotion-info-stock").text(`APENAS ${t} EM ESTOQUE. NÃO DEIXE PRA DEPOIS!`),$(".block.shipping-info").show(),console.log("B"))}),$('select[specification="Letra"]').on("change",function(){console.log("Changed"),$(".block.shipping-info").show()})}},applyPlaceholderInputsUnavaible:()=>{$(document.body).is(".jv-product-available")&&($("#notifymeClientName").attr("placeholder","Digite seu nome"),$("#notifymeClientEmail").attr("placeholder","Digite seu e-mail"))}};$(document).ready(s.init);$(window).load(function(){s.windowOnload()}),$(document).ajaxStop(s.ajaxStop)}catch(e){console.log("Erro na instância do [NewProduct]: ",e)}}();