function orionFormatPrice(t,e,o,a){t=(t+"").replace(/[^0-9+\-Ee.]/g,""),t=isFinite(+t)?+t:0,a=void 0===a?",":a,o=void 0===o?".":o;var i="",i=function(t,e){var o=Math.pow(10,e);return""+(Math.round(t*o)/o).toFixed(e)};return 3<(i=((e=isFinite(+e)?Math.abs(e):0)?i(t,e):""+Math.round(t)).split("."))[0].length&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(i[1]||"").length<e&&(i[1]=i[1]||"",i[1]+=Array(e-i[1].length+1).join("0")),i.join(o)}!function(){try{let i={init:()=>{i.verifyTypeProduct(),i.applyChangesPrices(),i.getInfoProduct(),i.applySlickShelf(),i.applySlideToggleInInfomartions(),i.quantityProductToCart(),i.addProductCart(),i.applyConfigSelectSku(),i.applyFilterAdegaConfig()},windowOnload:()=>{},ajaxStop:()=>{},verifyTypeProduct:()=>{("1000030"==vtxctx.categoryId?$(".aside-wrapper.joias"):$(".aside-wrapper.adegas")).hide()},getInfoProduct:()=>{var t=skuJson.productId;$.ajax({type:"GET",url:"/api/catalog_system/pub/products/search/?fq=productId:"+t,dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json",Accept:"application/vnd.vtex.ds.v10+json"}}).done(function(t){console.log(t[0]),i.buildBigThumbs(t[0]),"1000030"==vtxctx.categoryId?i.buildDescriptionsAdegas(t[0]):i.buildDescriptionJoias(t[0])})},buildBigThumbs:t=>{if(t.items[0].images.length<=3)return $("#show").addClass("no-slick"),$("#jv-prodimage-load").remove(),void $("#jv-product-block-image").removeClass("hide-block-image");$("#show").addClass("jv-with-slick");let a="";t.items[0].images.forEach(t=>{let e=t.imageTag.replace(/~/g,""),o=(e=(e=e.replace(/#width#-#height#/g,"450-450")).replace(/width="#width#" height="#height#"/g,""),$(e));o=(o=o.attr("src")).replace(/450-450/g,"1000-1000"),a+=`<div class="jv-bigthumbs-block"><a class="jqzoom" href="${o}">${e}</a></div>`});t=`<div class="jv-bigthumbs">${a}</div>`;$("#include").html(t),$(".jqzoom").jqzoom({zoomType:"standard",zoomWidth:500,zoomHeight:500,preloadImages:!0}),i.applySlickImageAndThumbs()},applySlickImageAndThumbs:()=>{let t=$(".jv-bigthumbs"),e=$("#show .thumbs");t.each(function(){$(this).find(".slick-arrow").wrapAll('<div class="slick-nav" />')}),t.slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,asNavFor:$("#show .thumbs")}),e.not(".slick-initialized").slick({slidesToShow:3,slidesToScroll:1,asNavFor:$(".jv-bigthumbs"),arrows:!0,dots:!1,centerMode:!0,focusOnSelect:!0}),setTimeout(function(){console.log("100"),$("#jv-prodimage-load").remove(),$("#jv-product-block-image").removeClass("hide-block-image")},1e3)},applySlickShelf:()=>{let t=$(".jv-shelf.wrapper ul");if(console.log("106"),console.log(t.children().length),t.find("li[layout]").length<=4||0==t.children().length)return console.log("108"),void t.addClass("jv-shelf-no-slick");console.log("110"),t.slick({slidesToShow:4,slidesToScroll:1,arrows:!0,fade:!0})},applyChangesPrices:()=>{if("1000030"!=vtxctx.categoryId){var o=`<em class="jv-price-boleto-pix">Ou <strong>${(fixPrice=function(t){return 4==(p=t.toFixed(2).replace(".",",")).split(",")[0].length?"R$ "+p[0]+"."+p.substring(1,p.length):5==p.split(",")[0].length?"R$ "+p.substring(0,2)+"."+p.substring(2,p.length):"R$ "+p})(.9*parseInt(dataLayer[0].productPriceTo))} "</strong> no boleto, PIX ou transferência</em>`;$(o).appendTo($(".descricao-preco"));let t=$(".descricao-preco .price-installments").first(),e=t.text();e=e.replace("ou"," em até"),t.text(e)}else"1000030"==vtxctx.categoryId&&(o=orionFormatPrice((o=(o=skuJson.skus[0].bestPrice)-.05*o)/100,2,",","."),$(".price-box-unitys").text("R$ "+o))},applySlideToggleInInfomartions:()=>{$(".informations-section span").on("click",function(t){t.preventDefault();let e=$(this);e.toggleClass("active"),e.next().toggle()})},buildDescriptionJoias:t=>{$("#jv-details-product").html(`<p>${t.description}</p>`),t["Cuidados com a peça"]&&t["Cuidados com a peça"][0]&&$("#jv-warnings-product").html(`<p>${t["Cuidados com a peça"][0]}</p>`)},buildDescriptionsAdegas:t=>{let e=$(".block.wine-resume"),o="";t["Porcentagem Das"]&&t["Porcentagem Das"][0]&&(o+=`
                        <li>
                            <strong>Porcentagem das: </strong>
                            <span>${t["Porcentagem Das"][0]}</span>
                        </li>
                    `),t.Uvas&&t.Uvas[0]&&(o+=`
                        <li>
                            <strong>Uvas: </strong>
                            <span>${t.Uvas[0]}</span>
                        </li>
                    `),t["Vinícola"]&&t["Vinícola"][0]&&(o+=`
                        <li>
                            <strong>Vinícola:  </strong>
                            <span>${t["Vinícola"][0]}</span>
                        </li>
                    `),t["Teor alcoólico"]&&t["Teor alcoólico"][0]&&(o+=`
                        <li>
                            <strong>Teor alcoólico: </strong>
                            <span>${t["Teor alcoólico"][0]}</span>
                        </li>
                    `),t.Uva&&t.Uva[0]&&(o+=`
                        <li>
                            <strong>Uva: </strong>
                            <span>${t.Uva[0]}</span>
                        </li>
                    `),t["Região"]&&t["Região"][0]&&(o+=`
                        <li>
                            <strong>Região: </strong>
                            <span>${t["Região"][0]}</span>
                        </li>
                    `),t.Safra&&t.Safra[0]&&(o+=`
                        <li>
                            <strong>Safra: </strong>
                            <span>${t.Safra[0]}</span>
                        </li>
                    `),t["Harmoniza com"]&&t["Harmoniza com"][0]&&(o+=`
                        <li>
                            <strong>Harmoniza com: </strong>
                            <span>${t["Harmoniza com"][0]}</span>
                        </li>
                    `);var a=`<ul>${o}</ul>`;e.html(a),$(".block.shortdescription").html(`<p>${t.description}</p>`)},applyConfigSelectSku:()=>{if("1000022"==vtxctx.departmentyId||"1000029"!=vtxctx.departmentyId){let t=$(".sku-selector-container.sku-selector-container-0");console.log("Passei 1!"),console.log(t.length),0!=t.children().length&&$(".block.skuselection select").find("option").first().text("Tamanho")}else"1000029"==vtxctx.departmentyId&&console.log("Vinhos")},quantityProductToCart:()=>{if("1000022"==vtxctx.departmentyId||"1000029"!=vtxctx.departmentyId){let o=$(".buybutton-qtt input"),a=$(".buybutton-wrapper .buy-button.buy-button-ref"),i=1;$(".buybutton-qtt-inputs span").on("click",function(t){t.preventDefault(),i=o.val(),i=parseInt(i);let e=a.attr("href");$(this).is(".inputs-up")?(i=parseInt(i)+parseInt(1),o.val(i),e=e.replace(/qty=\d+/g,"qty="+i),a.attr("href",e)):$(this).is(".inputs-down")&&1!=i&&(i=parseInt(i)-parseInt(1),o.val(i),e=e.replace(/qty=\d+/g,"qty="+i),a.attr("href",e))})}else if("1000029"==vtxctx.departmentyId){let e=$(".unity-box-input input"),o=1;$(".block-arrows span").on("click",function(t){t.preventDefault(),o=e.val(),o=parseInt(o),$(this).is(".arrows-to-up")?(o=parseInt(o)+parseInt(1),e.val(o)):$(this).is(".arrows-to-down")&&1!=o&&(o=parseInt(o)-parseInt(1),e.val(o))})}},addProductCart:()=>{"1000022"==vtxctx.departmentyId||"1000029"!=vtxctx.departmentyId?$(".buybutton-wrapper .buy-button.buy-button-ref").on("click",function(t){t.preventDefault();let e=$(this),o=i.returnSku($(this));if(console.log("A"),"alerta"==o)return console.log("B"),alert("Por favor, selecione o modelo desejado."),!1;console.log("C");t=$("#jv-joias-qtt-input").val();e.addClass("active-load"),console.log(o),i.sendProductToOrderForm(o,t,e)}):"1000029"==vtxctx.departmentyId&&$(".block.buybutton .buy-button.buy-button-ref").on("click",function(e){e.preventDefault();let o=$(this),t=$("#jv-select-unity-box option:selected").val(),a=i.returnSku($(this));if(o.addClass("active-load"),"unidade"==t){let t=$("#jv-adegas-qtt-input").val(),e=$(this).attr("href");e=e.replace(/qty=\d+/g,"qty="+t),$(this).attr("href",e),i.sendProductToOrderForm(a,t,o)}else if("caixa"==t){e=$("#jv-adegas-qtt-input").val();e*=6;let t=$(this).attr("href");t=t.replace(/qty=\d+/g,"qty="+e),$(this).attr("href",t),i.sendProductToOrderForm(a,e,o)}})},sendProductToOrderForm:(t,e,o)=>{let a={id:t,quantity:e,seller:"1"};vtexjs.checkout.getOrderForm().done(function(t){vtexjs.checkout.addToCart([a],null).done(function(t){miniCartFunctions.update(t),$(".mini-cart-wrapper").addClass("active"),$(".mini-cart-close-overlay").fadeIn(400,"linear"),o.removeClass("active-load")})})},returnSku:t=>{let e=t.attr("href");return"javascript:alert('Por favor, selecione o modelo desejado.');"==e?"alerta":skuId=e.match(/(?<=sku=).*(?=&qty)/g)[0]},applyFilterAdegaConfig:()=>{$(window).width()<768&&($(".search-single-navigator").hide(),$(".search-single-navigator").before("<div class='menu-dep-filtrar'>VER MAIS VINHOS</div>"),$(".search-single-navigator h5").click(function(t){t.preventDefault(),$(this).toggleClass("active")}),$(".menu-dep-filtrar").click(function(t){$(".menu-dep-filtrar").toggleClass("active"),$(".search-single-navigator").slideToggle()}),$(".jv-product-adega-shipping ul").not(".slick-initialized").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,drag:!0}))}};$(document).ready(i.init);$(window).load(function(){i.windowOnload()}),$(document).ajaxStop(i.ajaxStop)}catch(t){console.log("Erro na instância do [NewProduct]: ",t)}}();