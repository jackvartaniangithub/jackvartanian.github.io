!function(){try{let r={init:()=>{r.appendToBody(),r.start(),r.events(),r.qtdProductAdega()},windowOnload:()=>{},ajaxStop:()=>{},close:()=>{$(".mini-cart-wrapper").removeClass("active"),$(".mini-cart-close-overlay").fadeOut(400,"linear")},open:()=>{$(".mini-cart-wrapper").addClass("active"),$(".mini-cart-close-overlay").fadeIn(400,"linear")},start:()=>{$(".buy-button.buy-button-ref").addClass("buy-btn-ldng"),vtexjs.checkout.getOrderForm().done(function(t){console.log("getOrderForm passed"),r.update(t)})},appendToBody:()=>{$("body").append('<div class="mini-cart-wrapper"><div class="mini-cart-close-overlay"></div><div class="mini-cart-sidebar-container"><div class="mini-cart-content"><div class="mini-cart-title"><div class="mini-cart-close"></div><span>SACOLA</span><span id="mini-cart-removeall" style="width: auto;text-transform: uppercase;font-weight: 600;text-decoration: underline;font-size: 10px;cursor: pointer;color: #737373;position: absolute;right: 5px;">Limpar sacola</span></div><div class="mini-cart-products"></div><div class="mini-cart-bottom"><p class="mini-cart-bottom-total">TOTAL<span></span></p><p class="mini-cart-bottom-frete" style="padding-top: 7px;">FRETE<span style="color: #4AAE51;">GRÁTIS</span></p><p class="mini-cart-bottom-msg"></p><a class="mini-cart-bottom-checkout" href="/checkout/#/cart">REVISAR A COMPRA</a></div><div class="msg-empty"><p>Sua sacola está vazia.</p><a class="btn-choose-more" href="/"><span>Escolher produtos</span></a></div></div></div></div>')},update:t=>{items=t.items,$(".mini-cart-icon-mob-qtd").html(""),(numItemsInCart=0)<items.length?(numItemsInCart=items.length,$(".mini-cart-wrapper").removeClass("empty"),$(".mini-cart-products").html(""),$(".mini-cart-products").append('<ul class="products-list"></ul>'),items.forEach(function(t,e){sku=t.id,skuName=t.skuName,price=t.price,sellingPrice=t.sellingPrice,url=t.detailUrl,imgUrl=t.imageUrl,qtd=t.quantity,$(".products-list").prepend('<li class="products-list-item" data-sku-id="'+sku+'" data-product-index="'+e+'"><div class="products-list-item-wrap"><div class="product-image"><a class="product-link" href="'+url+'"><img src="'+imgUrl+'"></a></div><div class="product-info"><div class="product-name"><a class="product-link" href="'+url+'">'+skuName+'</a></div><div class="product-qtd-price"><span class="product-qtd">Qtd: '+qtd+'</span><span class="product-price">'+r.fixPrice(sellingPrice)+'</span></div><a data-product-index="'+e+'" class="product-remove">Remover</a></div></div></li>')}),$(".mini-cart-bottom-total span").html(r.fixPrice(t.value)),t.value<1e5?$(".mini-cart-bottom-frete").hide():$(".mini-cart-bottom-frete").show()):$(".mini-cart-wrapper").addClass("empty"),$(".mini-cart-icon-mob-qtd").html(numItemsInCart),$(".mini-cart-products").append('<span class="updated" style="display:none"></span>')},addToCartProductPage:(t,e)=>{"productPage"!=e&&"categoryPage"!=e||(a=t.target.href,i=t.target,-1===a.indexOf("Por favor, selecione o modelo desejado.")?($("a.buy-button.buy-button-ref").addClass("ldng-active"),"productPage"==e&&(o=a.substring(a.indexOf("sku=")+4,a.indexOf("&qty")),n=document.getElementById("productQty").value,"1000029"==vtxctx.departmentyId&&("1000030"!=vtxctx.categoryId&&"1000033"!=vtxctx.categoryId||$(".selectUn-Cx option")[1].selected&&(n*=6,$(".comprarCaixa.buy-button.buy-button-ref").addClass("ldng-active")),"1000031"==vtxctx.categoryId&&$(".selectUn-Cx option")[1].selected&&(n*=12,$(".comprarCaixa.buy-button.buy-button-ref").addClass("ldng-active")),$(".selectUn-Cx option")[0].selected&&(n*=1,$(".comprarUnidade.buy-button.buy-button-ref").addClass("ldng-active"))))):alert("Por favor, selecione o modelo desejado."),"categoryPage"==e&&(o=(i=$(i).parent()).find(".buy-button-normal")[0].id,n=i.find(".product-main-info-price-productQty")[0].value,i.find(".selectUn-Cx option")[0].selected?"Azeites"==i.find(".shelfcategory")[0].innerText?n*=12:n*=6:i.find(".selectUn-Cx option")[1].selected&&(n*=1))),"kitPage"==e&&(o=$(".fake-prateleira-kit .sku-kit").text(),n=1);var a,o,n,i={id:o,quantity:n,seller:"1"};try{vtexjs.checkout.addToCart([i],null).done(function(t){try{console.log(t),r.update(t),"productPage"==e&&(r.open(),$("a.buy-button.buy-button-ref").removeClass("ldng-active"),$(".buy-button.buy-button-ref").removeClass("ldng-active"))}catch(t){console.log("error addToCartProductPage, redirecting to cart"),window.location.href=a}})}catch(t){console.log("error addToCartProductPage, redirecting to cart"),window.location.href=a}},removeItem:t=>{t.preventDefault(),console.log("remove click");var e=t.srcElement.attributes["data-product-index"].value;$("li[data-product-index='"+e+"']").css("opacity",".5"),$(".product-remove").hide(),vtexjs.checkout.getOrderForm().then(function(t){t=[{index:e,quantity:t.items[e].quantity}];return vtexjs.checkout.removeItems(t)}).done(function(t){r.update(t)})},events:()=>{$(".n1-header__top__icones li:nth-of-type(2) a").click(function(t){0<$(".mini-cart-wrapper span.updated").length&&(t.preventDefault(),r.open())}),$(".mini-cart-icon-mob a").click(function(t){0<$(".mini-cart-wrapper span.updated").length&&(t.preventDefault(),r.open())}),$(".mini-cart-close-overlay").click(function(){r.close()}),$(".mini-cart-close").click(function(){r.close()}),$("#mini-cart-removeall").click(function(){vtexjs.checkout.removeAllItems().done(function(t){r.update(t)})}),$(".mini-cart-products").on("click",".product-remove",function(t){t.preventDefault(),r.removeItem(t)}),$(".produto .buy-button.buy-button-ref").click(function(t){t.preventDefault(),pageType="productPage",r.addToCartProductPage(t,pageType)}),$("body").on("click",".seemore.buy-button.buy-button-ref",function(t){t.preventDefault(),pageType="categoryPage",r.addToCartProductPage(t,pageType),r.open()}),$(".compraKit").click(function(t){t.preventDefault(),pageType="kitPage",r.addToCartProductPage(t,pageType),r.open()})},fixPrice:t=>4==(p=(.01*t).toFixed(2).replace(".",",")).split(",")[0].length?"R$ "+p[0]+"."+p.substring(1,p.length):5==p.split(",")[0].length?"R$ "+p.substring(0,2)+"."+p.substring(2,p.length):"R$ "+p,qtdProductAdega:()=>{1!=$("body").hasClass("produto")&&($("body").on("click",".product-main-info-price-buttonUp",a=>{a.preventDefault(),e=$($(a.target).parent().parent().find(".product-main-info-price-productQty")[0]),t=parseInt(e.val(),10),t++,e.attr("value",t)}),$("body").on("click",".product-main-info-price-buttonDown",a=>{a.preventDefault(),e=$($(a.target).parent().parent().find(".product-main-info-price-productQty")[0]),1<(t=parseInt(e.val(),10))&&(t--,e.attr("value",t))}))}};$(document).ready(r.init);$(window).load(function(){r.windowOnload()}),$(document).ajaxStop(r.ajaxStop)}catch(t){console.log("Erro na instância do [NewCommon]: ",t)}}();