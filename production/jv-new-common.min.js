(function () {

    try {

        let NewCommon = {
            init: () => {
                NewCommon.sitemapFunctions();
                if ($(window).width() <= 1024) {
                    NewCommon.clickEvents();
                }
                NewCommon.applySlickBenefits();
                NewCommon.applyEngraving();
            },
            windowOnload: () => {},
            ajaxStop: () => {},
            sitemapFunctions: () => {
                $('.smTitleF').on('click', function() {
                    if ($("body").width() <= 840) {
                        $('.joiasFeminina').toggleClass("abreSitemapfooter");
                        $('.colecoesFeminina').toggleClass("abreSitemapfooter");
                        $(this).toggleClass('active');
                    }
                });
            
                //Masculinas
                $('.smTitleM').on('click', function() {
                    if ($("body").width() <= 840) {
                        $('.joiasMasculina').toggleClass("abreSitemapfooter");
                        $('.colecoesMasculina').toggleClass("abreSitemapfooter");
                        $(this).toggleClass('active');
                    }
                });
            
                //Pesquise Por
                $('.smTitleP').on('click', function() {
                    if ($("body").width() <= 840) {
                        $('.ctgEstilo').toggleClass("abreSitemapfooter");
                        $('.ctgMetal').toggleClass("abreSitemapfooter");
                        $(this).toggleClass('active');
                    }
                });
            },
            popupHelpFunctions: () => {
                var date = new Date();
                var hour = date.getHours();
                var day = date.getDay();
                var minute = date.getMinutes();

                //ABRE HELP BOX
                $('#help-icon-box').click(function() {
                    $('.help-box').show();
                });

                //FECHA HELP BOX
                $('.fecha-help').click(function() {
                    $('.help-box').hide();
                })

                $('.chatOnline-Help').click(function() {
                    $('.help-box').hide();
                })

                //ALTERA DATA
                //if (((hour >= 9 && minute >= 30) || hour >= 10) && (hour <= 18) && (day != 0 && day != 6) || (hour >= 12) && (hour <= 17) && (day == 6)) {

                var showPopup = true;
                if (((hour >= 9 && minute >= 30) || hour >= 10) && (hour <= 18) && (day != 0 && day != 6) && showPopup == true) {
                    $('.help-online').css('display', 'block');
                    $('.estamos-on').show();
                    $('.help-offline').hide();

                } else {
                    $('.help-offline').hide();
                    $('.estamos-on').hide();
                    $('.help-online').hide();

                }
            },
            clickEvents: () => {
                $(".header-title.with-submenu1 .submenu1-title").click(function(event) {
                    submenu = $(event.target)[0].parentElement.nextElementSibling;
                    $(submenu).addClass('troca-page');
                });
        
                $(".title.ext").click(function(event) {
                    icon = $(event.target)
                    extension = icon[0].nextElementSibling;
                    $(icon).toggleClass('active-nav-icon')
                    $(extension).toggleClass('active-nav')
                });
        
                $('.backPage').click(function() {
                    $(this).parent().parent().removeClass('troca-page')
                })
        
        
                $('.header__bottom__mob_close').click(function() {
                    $('.submenu1').removeClass('troca-page')
                    $('.title.ext').removeClass('active-nav-icon')
                    $('.extension').removeClass('active-nav')
                })
        
                $('.n1-menu-buttom').click(function(t) {
                    //$(this).toggleClass('open');
                    $('.n1-header__bottom__inner').toggleClass('open');
                });
        
                $('div.submenu1-title').click(function() {
                    $(this).parent().toggleClass('open');
                });
        
                $('.with-submenu1>div.submenu1>ul>li.title').click(function() {
                    $(this).toggleClass('open');
                });
        
                $('.header__bottom__mob_close').click(function() {
                    $('.n1-header__bottom__inner').toggleClass('open');
                    $('.n1-menu-buttom').toggleClass('-open');
        
                });
            },
            applySlickBenefits: () => {
                if (vtxctx.departmentName=='Adega') {
                    // if (!$("#beneficios").length) {
                    //     console.log("[#beneficios] not finded.");
                    //     return;
                    // }
                    // $("#beneficios").hide();
                    document.getElementById("beneficios").style.display = 'none';
                    var adegaBenefitsStr = '<li><div class="item-beneficio"><span>Condições especiais para Grande SP:</span></div></li>' + '<li><div class="item-beneficio"><span>Frete Grátis acima de R$ 199,00</span></div></li>' + '<li><div class="item-beneficio"><span>Frete a R$ 9,99</span></div></li>' + '<li><div class="item-beneficio"><span>Entrega Expressa</span></div></li>';
                    document.querySelector('#banner-beneficios ul').innerHTML = adegaBenefitsStr;
                    document.getElementById("beneficios").style.display = 'block';
                    // $("#beneficios").html(adegaBenefitsStr);
                    // $("#beneficios").show();
                    // slickIt('#banner-beneficios ul');
                    console.log('AAA')
                    $('#banner-beneficios ul').slick({
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        variableWidth: false,
                        arrows: false,
                        autoplay: true,
                        autoplaySpeed: 10000,
                        responsive: [{
                            breakpoint: 900,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 1,
                
                            }
                        }, {
                            breakpoint: 600,
                            settings: {
                                slidesToShow: 1,
                                slidesToScroll: 1,
                                autoplaySpeed: 3000
                            }
                        }]
                    });
                } else {
                    console.log('BBB')
                    $("#beneficios").show();
                    $('#banner-beneficios ul').slick({
                        slidesToShow: 4,
                        slidesToScroll: 1,
                        variableWidth: false,
                        arrows: false,
                        autoplay: true,
                        autoplaySpeed: 10000,
                        responsive: [{
                            breakpoint: 900,
                            settings: {
                                slidesToShow: 2,
                                slidesToScroll: 1,
                
                            }
                        }, {
                            breakpoint: 600,
                            settings: {
                                slidesToShow: 1,
                                slidesToScroll: 1,
                                autoplaySpeed: 3000
                            }
                        }]
                    });
                }
            },
            applyEngraving: () => {
                setInterval(function () { 
                    if ($(".flags_img .flag.engraving").length) {
                        $(".flag.engraving").each(function () { 
                            $(this).insertAfter($(this).parents("li").find(".price")); 
                        });
                    }
                }, 500);
            }
        };

        // Instanciando a funcao
        $(document).ready(NewCommon.init);
        let windowLoad = function () {
            NewCommon.windowOnload();
        };
        $(window).load(windowLoad);
        $(document).ajaxStop(NewCommon.ajaxStop);
        
    } catch (e) {
        console.log("Erro na instância do [NewCommon]: ", e);
    }

})();

// Utils
function orionFormatPrice(n,t,e,i){n=(n+"").replace(/[^0-9+\-Ee.]/g,""),n=isFinite(+n)?+n:0,i=void 0===i?",":i,e=void 0===e?".":e;var r="";r=function(n,t){var e=Math.pow(10,t);return""+(Math.round(n*e)/e).toFixed(t)};return 3<(r=((t=isFinite(+t)?Math.abs(t):0)?r(n,t):""+Math.round(n)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i)),(r[1]||"").length<t&&(r[1]=r[1]||"",r[1]+=Array(t-r[1].length+1).join("0")),r.join(e)}